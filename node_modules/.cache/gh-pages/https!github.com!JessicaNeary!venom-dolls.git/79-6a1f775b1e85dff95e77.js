"use strict";(self.webpackChunkvenom_dolls=self.webpackChunkvenom_dolls||[]).push([[79],{5079:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(5861),a=n(7757),c=n.n(a),l=n(7294),o=n(5076),s=n(9230),i=n(5873),m="https://js.stripe.com/v3",d=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,u="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",f=null,p=function(e){return null!==f||(f=new Promise((function(t,n){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(u),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(m,'"]')),t=0;t<e.length;t++){var n=e[t];if(d.test(n.src))return n}return null}();r&&e?console.warn(u):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(m).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(a){return void n(a)}else t(null)}))),f},v=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.29.0",startTime:t})}(r,n),r},E=Promise.resolve().then((function(){return p(null)})),w=!1;E.catch((function(e){w||console.warn(e)}));var b,N=function(){return b||(b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];w=!0;var r=Date.now();return E.then((function(e){return v(e,t,r)}))}("pk_live_51KSsb9KtGQ4ZHKavHbJLXcnUHzLUoqYVCTzfRTmGFUiOZF0OFgT4xP9IXf6TuE7pA0GKWHSbGV8UiaCV4IQeNKjN00DmpVTuTg")),b},h=n(1767),y=function(e){if(e.find((function(e){return e.name.match(/(Hoodie)/)})))return{}.GATSBY_SHIPPING_LARGE;var t=0;return e.forEach((function(e){e.name.match(/(T-Shirt)/)&&(t+=e.quantity)})),t>1?{}.GATSBY_SHIPPING_LARGE:{}.GATSBY_SHIPPING_SMALL},S=n(3814),g=function(e){var t=e.cartOpen,n=(0,l.useState)("idle"),a=n[0],m=n[1],d=(0,i.v9)((function(e){return e.sessionId})),u=(0,i.v9)((function(e){return e.cart})),f=u.items,p=u.total,v=(0,i.I0)();(0,l.useEffect)((function(){if(d){var e=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:e.sent.redirectToCheckout({sessionId:d});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[d]);var E=function(){return v((0,h.jc)())},w=function(e){return function(t){v((0,h.WP)(e,parseInt(t.target.value)))}};function b(){return(b=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),f[0]?(m("loading"),n=y(f),v((0,h.ci)(f,n))):m("missing-items");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.createElement(o.Z,{size:"xl",show:t,onHide:E},l.createElement(o.Z.Header,{closeButton:!0}),l.createElement(o.Z.Body,null,l.createElement("div",{className:"row mx-2 justify-content-between align-items-center fw-bold"},l.createElement("div",{className:"col-4 col-md-6"},"MY CART"),l.createElement("div",{className:"col-2 small"},"QTY"),l.createElement("div",{className:"col-2 col-md-1 small"},"PRICE"),l.createElement("div",{className:"d-none d-md-block col-1 small"},"SUBTOTAL"),l.createElement("div",{className:"col-1"})),f[0]?l.createElement("div",{className:"cart-products"},f.map((function(e,t){return l.createElement("div",{className:"row mx-2 border-bottom py-3 align-items-start justify-content-between",key:t},l.createElement("div",{className:"col-4 col-md-6 d-flex"},l.createElement("div",{className:"d-none d-md-block col-4"},l.createElement(s.G,{className:"mr-3",alt:e.name,image:(0,s.c)(e.image)})),l.createElement("div",{className:"col-md-8 mt-2 mt-md-3 ms-md-4 ps-md-3"},l.createElement("h6",null,e.name),l.createElement("p",{className:"fst-italic"},e.size&&"Size: "+e.size))),l.createElement("div",{className:"col-2 mt-2"},l.createElement("input",{className:"w-100 w-md-50 text-center",type:"number",min:1,defaultValue:e.quantity,onChange:w(e)})),l.createElement("div",{className:"d-none d-md-block col-1 mt-2"},(0,S.Z)(e.price,"NZD")),l.createElement("div",{className:"col-2 col-md-1 mt-2 fw-bold"},(0,S.Z)(e.price*e.quantity,"NZD")),l.createElement("div",{className:"col-1 mt-2"},l.createElement("button",{className:"text-end btn btn-outline-dark border-0",onClick:function(){return v((0,h.h2)(e))}},"X")))}))):l.createElement("div",{className:"m-2 p-4 border-top border-bottom"},"Your cart is empty."),f[0]&&l.createElement("p",{className:"small fst-italic mt-2"},"Please note: As our merch is all hand printed by a local business, please allow up to 2-3 weeks for your purchase to be dispatched."),l.createElement("div",{className:"d-flex py-3 w-50 me-2 ms-auto justify-content-between"},l.createElement("h6",{className:"fw-bold"},"TOTAL"),l.createElement("h6",{className:"fw-bold"},(0,S.Z)(p,"NZD"))),l.createElement("div",{className:"d-flex mt-2 justify-content-end"},l.createElement("button",{className:"px-4 me-3 btn "+(f[0]?"btn-danger":"btn-secondary")+" rounded-0",disabled:"loading"===a||!f[0],onClick:function(e){return b.apply(this,arguments)}},"loading"===a?"LOADING":"PROCEED TO CHECKOUT"),l.createElement("button",{className:"px-3 btn btn-dark rounded-0",disabled:"loading"===a,onClick:E},"KEEP SHOPPING"))))}}}]);
//# sourceMappingURL=79-6a1f775b1e85dff95e77.js.map